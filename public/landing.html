<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KuroNeko | Dashboard</title>
    <link id="favicon" rel="icon" href="">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        mono: ['"JetBrains Mono"', 'monospace'],
                        display: ['"Space Grotesk"', 'sans-serif']
                    },
                    boxShadow: { 
                        'hard': '5px 5px 0px 0px #1e293b',
                        'hard-hover': '2px 2px 0px 0px #1e293b',
                        'hard-sm': '3px 3px 0px 0px #1e293b',
                    },
                    colors: {
                        'primary': '#6366f1',
                        'secondary': '#a855f7',
                        'dark': '#1e293b',
                    },
                    backgroundImage: {
                        'grid-pattern': "linear-gradient(to right, #e2e8f0 1px, transparent 1px), linear-gradient(to bottom, #e2e8f0 1px, transparent 1px)",
                    },
                    animation: {
                        'blob': 'blob 7s infinite',
                        'fade-up': 'fadeUp 0.5s ease-out forwards',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        },
                        fadeUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #f8fafc; }
        .bg-grid-size { background-size: 40px 40px; }
        
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        
        .shimmer {
            background: linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

        /* --- SOFT BUTTON CSS START --- */
        .soft-btn {
            --button-raise-level: 8px; /* Slightly reduced for mobile fit */
            --press-inset: 4px;
            --press-compensated: 0px;
            --button-hover-pressure: 1.5;
            --transform-speed: 160ms;
            --radius: 12px;
            --border-width: 0px;
            --edge-aa: 0px;
            --glare-rgb: 255, 255, 255;
            --glare-alpha: 0.2;
            --glare-width: 20;

            position: relative;
            border: none;
            background: transparent;
            padding: 0;
            cursor: pointer;
            user-select: none;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            display: block;
            text-decoration: none;
        }

        .soft-btn__wrapper {
            position: relative;
            display: block;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        /* Side wall */
        .soft-btn__wrapper::before {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            height: calc(100% - var(--button-raise-level));
            background: var(--side-color);
            border-radius: var(--radius);
            z-index: 1;
        }

        /* Face */
        .soft-btn__content {
            position: relative;
            width: 100%;
            height: calc(100% - var(--button-raise-level));
            background: var(--surface-color);
            color: var(--text-color);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            transform: translateY(0);
            transition: transform var(--transform-speed) ease-out;
            will-change: transform;
            backface-visibility: hidden;
            transform-origin: center;
            z-index: 2;
            border: var(--border-width) solid var(--border-color);
        }

        .soft-btn__inner {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            z-index: 4;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Let clicks pass to parent */
        }

        /* Hover deformation */
        .soft-btn--middle .soft-btn__content { transform: translateY(calc(1px * var(--button-hover-pressure))); }
        .soft-btn--left .soft-btn__content { transform: skewY(calc(-1deg * var(--button-hover-pressure))); }
        .soft-btn--right .soft-btn__content { transform: skewY(calc(1deg * var(--button-hover-pressure))); }

        /* Pressed */
        .soft-btn--active .soft-btn__content {
            transform: translateY(var(--press-inset));
            transition: transform calc(var(--transform-speed) * 0.8) ease-out;
        }
        
        .soft-btn--active.soft-btn--left .soft-btn__content {
            transform: skewY(calc(-1deg * var(--button-hover-pressure))) translateY(var(--press-inset));
        }
        
        .soft-btn--active.soft-btn--right .soft-btn__content {
            transform: skewY(calc(1deg * var(--button-hover-pressure))) translateY(var(--press-inset));
        }

        /* Glare layer */
        .soft-btn__content::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            pointer-events: none;
            background: linear-gradient(90deg,
                rgba(var(--glare-rgb), 0) calc(50% - var(--glare-width) * 1%),
                rgba(var(--glare-rgb), calc(var(--glare-alpha) * 0.5)) calc(50% - var(--glare-width) * 0.5%),
                rgba(var(--glare-rgb), var(--glare-alpha)) 50%,
                rgba(var(--glare-rgb), calc(var(--glare-alpha) * 0.5)) calc(50% + var(--glare-width) * 0.5%),
                rgba(var(--glare-rgb), 0) calc(50% + var(--glare-width) * 1%));
            background-size: 200% 100%;
            background-position: 50% 50%;
            opacity: 0;
            transition: opacity 160ms ease, background-position var(--transform-speed) ease;
            z-index: 3;
        }

        .soft-btn--right .soft-btn__content::after { opacity: 1; background-position: 0% 50%; }
        .soft-btn--middle .soft-btn__content::after { opacity: 1; background-position: 50% 50%; }
        .soft-btn--left .soft-btn__content::after { opacity: 1; background-position: 100% 50%; }
        .soft-btn--active .soft-btn__content::after { opacity: 1; background: rgba(var(--glare-rgb), var(--glare-alpha)); background-position: 50% 50%; }

        /* VARIANTS MAPPING */
        .variant-solid {
            --surface-color: #6366f1; /* Primary */
            --side-color: #4338ca;    /* Darker Primary */
            --text-color: #ffffff;
            --border-color: transparent;
        }
        .variant-outline {
            --surface-color: #ffffff;
            --side-color: #94a3b8;
            --text-color: #1e293b;
            --border-color: #cbd5e1;
            --border-width: 2px;
        }
        .variant-steel {
            --surface-color: #f1f5f9;
            --side-color: #94a3b8;
            --text-color: #334155;
            --border-color: #cbd5e1;
            --border-width: 1px;
        }
        /* --- SOFT BUTTON CSS END --- */
    </style>
</head>
<body class="min-h-screen flex items-center justify-center font-mono p-4 selection:bg-primary selection:text-white relative overflow-hidden bg-grid-pattern bg-grid-size">

    <div class="fixed inset-0 pointer-events-none z-0 overflow-hidden">
        <div class="absolute top-0 left-1/4 w-72 h-72 bg-primary/20 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"></div>
        <div class="absolute top-0 right-1/4 w-72 h-72 bg-secondary/20 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob" style="animation-delay: 2s"></div>
        <div class="absolute -bottom-8 left-1/3 w-72 h-72 bg-pink-300/20 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob" style="animation-delay: 4s"></div>
    </div>

    <div class="relative z-10 w-full max-w-[420px]">
        
        <div class="bg-white/80 backdrop-blur-xl border-2 border-dark shadow-hard rounded-xl overflow-hidden transition-all duration-300">
            
            <div class="bg-white border-b-2 border-dark px-4 py-3 flex justify-between items-center select-none">
                <div class="flex gap-2 group cursor-pointer">
                    <div class="w-3 h-3 rounded-full bg-red-400 border border-dark group-hover:bg-red-500 transition-colors"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-400 border border-dark group-hover:bg-yellow-500 transition-colors"></div>
                    <div class="w-3 h-3 rounded-full bg-green-400 border border-dark group-hover:bg-green-500 transition-colors"></div>
                </div>
                <div class="flex items-center gap-2 px-2 py-0.5 rounded bg-slate-100 border border-slate-200">
                    <div class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></div>
                    <span class="text-[10px] font-bold text-slate-500 tracking-wider">ONLINE</span>
                </div>
            </div>

            <div class="p-6 relative">
                
                <div id="loader" class="flex flex-col gap-4">
                    <div class="w-full aspect-[16/9] border-2 border-slate-100 shimmer rounded-lg"></div>
                    <div class="space-y-2 mt-2">
                        <div class="h-8 w-2/3 shimmer rounded"></div>
                        <div class="h-4 w-full shimmer rounded"></div>
                        <div class="h-4 w-5/6 shimmer rounded"></div>
                    </div>
                    <div class="flex gap-3 mt-2">
                        <div class="h-12 w-1/2 shimmer rounded-lg"></div>
                        <div class="h-12 w-1/2 shimmer rounded-lg"></div>
                    </div>
                </div>

                <div id="content" class="hidden">
                    
                    <div class="relative w-full aspect-[16/9] border-2 border-dark rounded-lg overflow-hidden group mb-6 bg-slate-100">
                        <div class="absolute inset-0 bg-primary/10 z-10 group-hover:bg-transparent transition-all duration-300"></div>
                        <img id="dash-thumb" src="" alt="Cover" class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-700 ease-in-out">
                        
                        <div class="absolute bottom-3 left-3 z-20">
                            <span class="bg-white border-2 border-dark px-2 py-1 text-[10px] font-bold shadow-[2px_2px_0px_0px_#1e293b] flex items-center gap-1">
                                <i class="fa-solid fa-server text-primary"></i> v1.0.0
                            </span>
                        </div>
                    </div>

                    <div class="mb-6 text-center animate-fade-up">
                        <h1 id="dash-title" class="text-3xl font-display font-bold text-dark mb-2 tracking-tight uppercase"></h1>
                        <div class="flex justify-center mb-3">
                            <div class="h-1 w-12 bg-primary rounded-full"></div>
                        </div>
                        <p id="dash-desc" class="text-sm font-mono text-slate-500 leading-relaxed px-2"></p>
                    </div>

                    <div class="grid grid-cols-2 gap-4 mb-5 animate-fade-up h-16" style="animation-delay: 0.1s">
                        
                        <a href="/docs" class="soft-btn variant-solid w-full h-full">
                            <span class="soft-btn__wrapper">
                                <span class="soft-btn__content">
                                    <span class="soft-btn__inner">
                                        <i class="fa-solid fa-book-journal-whills text-sm"></i>
                                        <span class="font-bold text-sm tracking-wide">DOCS</span>
                                    </span>
                                </span>
                            </span>
                        </a>
                        
                        <a href="/stats" class="soft-btn variant-outline w-full h-full">
                            <span class="soft-btn__wrapper">
                                <span class="soft-btn__content">
                                    <span class="soft-btn__inner">
                                        <i class="fa-solid fa-chart-pie text-secondary"></i>
                                        <span class="font-bold text-sm tracking-wide">STATS</span>
                                    </span>
                                </span>
                            </span>
                        </a>
                    </div>

                    <div class="flex gap-3 justify-center animate-fade-up h-14" style="animation-delay: 0.2s">
                        <a id="btn-channel" href="#" target="_blank" class="flex-1 soft-btn variant-steel">
                            <span class="soft-btn__wrapper">
                                <span class="soft-btn__content">
                                    <span class="soft-btn__inner">
                                        <i class="fa-brands fa-whatsapp text-lg text-green-600"></i>
                                    </span>
                                </span>
                            </span>
                        </a>

                        <a id="btn-source" href="#" target="_blank" class="flex-1 soft-btn variant-steel">
                            <span class="soft-btn__wrapper">
                                <span class="soft-btn__content">
                                    <span class="soft-btn__inner">
                                        <i class="fa-brands fa-github text-lg text-dark"></i>
                                    </span>
                                </span>
                            </span>
                        </a>

                        <button onclick="share()" class="flex-1 soft-btn variant-steel">
                            <span class="soft-btn__wrapper">
                                <span class="soft-btn__content">
                                    <span class="soft-btn__inner">
                                        <i class="fa-solid fa-share-nodes text-lg text-blue-500"></i>
                                    </span>
                                </span>
                            </span>
                        </button>
                    </div>
                    <div class="mt-8 pt-4 border-t-2 border-dashed border-slate-300 text-center animate-fade-up" style="animation-delay: 0.3s">
                        <p class="text-[10px] font-mono text-slate-400">
                            POWERED BY <span class="text-primary font-bold">DANZZ</span> &bull; 2026
                        </p>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        const minLoadTime = 800; 
        const startLoad = Date.now();

        // --- BUTTON PHYSICS LOGIC START ---
        function initSoftButtons() {
            const buttons = document.querySelectorAll('.soft-btn');

            buttons.forEach(btn => {
                const handlePointer = (e) => {
                    if (e.type === 'pointerleave' || e.type === 'pointercancel' || e.type === 'pointerup') {
                        btn.classList.remove('soft-btn--active', 'soft-btn--left', 'soft-btn--right', 'soft-btn--middle');
                        try { btn.releasePointerCapture(e.pointerId); } catch(err){}
                        return;
                    }

                    const rect = btn.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const w = rect.width;

                    // Set capture on down
                    if(e.type === 'pointerdown') {
                        btn.classList.add('soft-btn--active');
                        try { btn.setPointerCapture(e.pointerId); } catch(err){}
                    }

                    // Calculate direction
                    btn.classList.remove('soft-btn--left', 'soft-btn--right', 'soft-btn--middle');
                    if (x < w * 0.33) btn.classList.add('soft-btn--left');
                    else if (x > w * 0.66) btn.classList.add('soft-btn--right');
                    else btn.classList.add('soft-btn--middle');
                };

                btn.addEventListener('pointerdown', handlePointer);
                btn.addEventListener('pointermove', (e) => {
                    if(btn.classList.contains('soft-btn--active')) handlePointer(e);
                });
                btn.addEventListener('pointerup', handlePointer);
                btn.addEventListener('pointerleave', handlePointer);
                btn.addEventListener('pointercancel', handlePointer);
            });
        }
        // --- BUTTON PHYSICS LOGIC END ---

        function share() {
            if (navigator.share) {
                navigator.share({
                    title: document.title,
                    url: window.location.href
                }).catch(console.error);
            } else {
                navigator.clipboard.writeText(window.location.href);
                // Simple toast or alert
                const originalText = document.querySelector('button[onclick="share()"] .soft-btn__inner').innerHTML;
                const inner = document.querySelector('button[onclick="share()"] .soft-btn__inner');
                inner.innerHTML = '<i class="fa-solid fa-check text-green-500"></i>';
                setTimeout(() => { inner.innerHTML = originalText; }, 1500);
            }
        }

        fetch('/config')
            .then(res => res.json())
            .then(config => {
                document.getElementById('dash-title').innerText = config.settings.apiName;
                document.getElementById('dash-desc').innerText = config.settings.description;
                
                const btnChannel = document.getElementById('btn-channel');
                if(config.settings.channelUrl) btnChannel.href = config.settings.channelUrl;
                else btnChannel.style.display = 'none';

                const btnSource = document.getElementById('btn-source');
                if(config.settings.github) btnSource.href = config.settings.github;
                else btnSource.style.display = 'none';

                const thumbEl = document.getElementById('dash-thumb');
                thumbEl.src = config.settings.thumbnail;
                thumbEl.onerror = () => { thumbEl.src = 'https://placehold.co/600x400/1e293b/FFF?text=API'; };

                if(config.settings.favicon) document.getElementById('favicon').href = config.settings.favicon;

                const elapsed = Date.now() - startLoad;
                const remaining = Math.max(0, minLoadTime - elapsed);

                setTimeout(() => {
                    document.getElementById('loader').classList.add('hidden');
                    const content = document.getElementById('content');
                    content.classList.remove('hidden');
                    // Initialize button physics after content is visible
                    initSoftButtons();
                }, remaining);
            })
            .catch(err => {
                console.error(err);
                // Fallback for demo/error
                document.getElementById('dash-title').innerText = "KuroNeko";
                document.getElementById('dash-desc').innerText = "Simple Dashboard Template";
                
                setTimeout(() => {
                    document.getElementById('loader').classList.add('hidden');
                    document.getElementById('content').classList.remove('hidden');
                    initSoftButtons();
                }, 1000);
            });
    </script>
</body>
</html>
